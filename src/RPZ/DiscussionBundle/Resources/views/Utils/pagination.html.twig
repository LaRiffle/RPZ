<ul class="pagination">
  {% if page > 1 %}
  <li class="page-item">
    <a class="page-link" href="{{ path(url, {'page': page - 1}) }}"><i class="fa fa-angle-left"></i></a>
  </li>
  {% endif %}
  {% if nbPages > 10 %}
    {% set step = 2 %}
    {% if page-step > 1 %}
      <li class="page-item">
        <span class="page-link">...</span>
      </li>
    {% endif %}
    {% for p in range(max(1, page-step), min(nbPages, page+step)) %}
      <li class="page-item {% if p == page %}active{% endif %}">
        <a class="page-link" href="{{ path(url, {'page': p}) }}">{{ p }}</a>
      </li>
    {% endfor %}
    {% if page+step < nbPages %}
      <li class="page-item">
        <span class="page-link">...</span>
      </li>
    {% endif %}
  {% else %}
  {% for p in range(1, nbPages) %}
    <li class="page-item {% if p == page %}active{% endif %}">
      <a class="page-link" href="{{ path(url, {'page': p}) }}">{{ p }}</a>
    </li>
  {% endfor %}
  {% endif %}
  {% if page < nbPages %}
  <li class="page-item">
    <a class="page-link" href="{{ path(url, {'page': page + 1}) }}"><i class="fa fa-angle-right"></i></a>
  </li>
  {% endif %}
</ul>
